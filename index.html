<html>
<head>
<link rel="stylesheet" type="text/css" href="bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="bootstrap-responsive.min.css">
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="jquery-1.7.2.min.js"></script>
<style type="text/css">
body
{
overflow:hidden;
}
#menu-bar
{
height:10%;
margin:0;
padding:0;
width:100%;
}
#terminal
{
font-family:Inconsolata;
font-size:15px;
padding:10px;
background:black;
height:80%;
}
#clipboard
{
position:absolute;
left:-20%;
width:0%;
height:0%;
}
.prompt, span.before, span.after
{
float:left;
left:0px;
color:#22FF08;
position:relative;
}
span.prompt_blink
{
float:left;
left:0px;
position:relative;
width:8px;
height:18px;
}
.line
{
color:#22FF08;width:100%;height:18px;padding:0;margin:0;
}
.line1
{
width:100%;height:18px;padding:0;margin:0;
}
.vis
{background:#22FF08	;color:black;}
.invi
{background:black;color:#22FF08;}
</style>
<script type="text/javascript">

////////////////////////        Terminal Aesthetics!        ////////////////////////



var cmd, content, position;
var new_line = "<div class='line1'><span class='prompt'>karts-$ </span><span id='before'></span><span class='prompt_blink vis'></span><span class='after'></span></div>";
var prompt = $('span.prompt_blink');
var before = $('span.before');
var after = $('span.after');

function blink()
{
$('span.prompt_blink').toggleClass('vis').toggleClass('invi');
var t = setTimeout("blink()",700);
}

function build_command(content,position)
{
$('span.before').html(content.substr(0,position));
$('span.after').html(content.substr(position+1,content.length-1));
$('span.prompt_blink').html(content.charAt(position));
}

function next_line()
{
var old_line = "<div class='line'><span class='prompt'>karts-$ </span><span>" + $('#clipboard').val() + "</span></div>";
$('div.line1').css("color","black");
$('#clipboard').val('');
$('div.line1').css("color","#22FF08");
$('div.line1').before(old_line);
}

window.onload = blink();
$(document).ready(function() {
$('#clipboard').focus();
$('#terminal').click(function() {
$('#clipboard').focus();
});

$('#clipboard').keydown(function() {
content = $(this).val();
	var position = $('#clipboard').prop("selectionStart");
	if(position<=content.length-1)
	build_command(content,position);
	else
	{
	$('span.before').html(content);
	$('span.prompt_blink').html('');
	$('span.after').html('');
	}
	if(event.which==13)
		next_line();
});

$('#clipboard').keyup(function() {
content = $(this).val();
	var position = $('#clipboard').prop("selectionStart");
	if(position<=content.length-1)
	build_command(content,position);
	else
	{
	$('span.before').html(content);
	$('span.prompt_blink').html('');
	$('span.after').html('');
	}
if($('span.prompt_blink').html()=='')
$('span.prompt_blink').css('width','8px');
else
$('span.prompt_blink').css('width','auto');
});

});



////////////////////////        Terminal Aesthetics!        ////////////////////////

</script>
</head>
<body>
<div id="menu-bar" class="span12"></div>

<div class="row">
<div id="terminal" class="offset1 span12">
<div class="line1"><span class="prompt">karts-$ </span><span class="before"></span><span class="prompt_blink vis"></span><span class="after"></span></div>
</div>
</div>
<div class="offset1 span12"><p id="test"></p></div>
<textarea id="clipboard"></textarea>
</body>
</html>
